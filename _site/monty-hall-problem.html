<!DOCTYPE html>
<html id="J-html" class="">
<head>
     <!--
     **
     * Author:         掌心
     * Contact:        zhanxin.info@gmail.com
     * Theme Name:     iLotus
     **
    -->
    <meta charset="UTF-8" />
    <title>
        
            三门问题及解法
        
    </title>
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="CCM" />
    <meta name="description" content="第一次听到三门问题是在电影《决胜21点》中，教授给出游戏*Let's Make a Deal*的设定：
1. 向参赛者展示三道关闭的门，其中有一道门后有奖品一辆汽车，而其他两门后则两头山羊。门后汽车的摆放是随机的。如果参赛者猜中哪道门后有汽车，则赢得奖品。 2. 游戏过程是先由参赛者选择三门之一，我们假设是门x；然后，知道奖品在哪的主持人会在剩下的门y, 门z中选择一个门后没有奖品的打开。之后，主持人会询问参赛者是否坚持选择门x，或者换到剩下的另一种选择。
教授的问题是，此时参赛者应该坚持原有选择，还是换门？换不换会有区别嘛？ " />
    <meta name="keywords" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" media="all" href="http://iccm.cc/static/style.css" />
    <!--[if lt IE 9]>
    <script src="http://iccm.cc/static/js/html5.js" type="text/javascript"></script>
    <![endif]-->
    <script src="http://iccm.cc/static/js/jquery.js" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
                  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
                          });
    </script>
    <script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" class="home blog lotus index">
    <nav class="lotus-nav">
        <ul>
            
            
            
            
            
            <li class="home ">
                <a href="/index.html" rel="bookmark" title="首页">
                    <i class="icon-home"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/archives.html" rel="bookmark" title="文章归档">
                    <i class="icon-reorder"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="http://cn.linkedin.com/in/chaominchen" rel="bookmark" title="Linkedin">
                    <i class="icon-linkedin"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="https://github.com/ccmien" rel="bookmark" title="Github">
                    <i class="icon-github"></i>
                </a>
                
            </li>
            
        </ul>
    </nav>

    <p class="lotus-breadcrub">
    <a href="http://iccm.cc/index.html" rel="nofollow" rel="nofollow" title="首页">Home</a>
    <span> &gt; </span>
    <a href="http://iccm.cc/archives.html" rel="nofollow" >Archives</a>
    <span> &gt; </span>
    三门问题及解法
</p>
<h1 class="lotus-pagetit">三门问题及解法</h1>
<p class="lotus-meta">Publish: <time class="date" pubdate="July 10, 2014">July 10, 2014</time></p>
<article  itemscope itemtype="http://schema.org/Article" class="lotus-post lotus-post-columns-1">
<p>第一次听到<a href="http://en.wikipedia.org/wiki/Monty_Hall_problem">三门问题</a>是在电影《决胜21点》中，教授给出游戏<em>Let’s Make a Deal</em>的设定：</p>

<ol>
  <li>向参赛者展示三道关闭的门，其中有一道门后有奖品一辆汽车，而其他两门后则两头山羊。门后汽车的摆放是随机的。如果参赛者猜中哪道门后有汽车，则赢得奖品。</li>
  <li>游戏过程是先由参赛者选择三门之一，我们假设是门x；然后，知道奖品在哪的主持人会在剩下的门y, 门z中选择一个门后没有奖品的打开。之后，主持人会询问参赛者是否坚持选择门x，或者换到剩下的另一种选择。</li>
</ol>

<p>教授的问题是，此时参赛者应该坚持原有选择，还是换门？换不换会有区别嘛？</p>

<p>同学们纷纷表示没区别，奖品在剩下两门中任一一门的概率均为1/2。此时男主鄙视地说出了正确答案：换门获胜的概率为2/3。</p>

<h2 id="section">解法1 简单列举</h2>
<p>门x  | 门y   | 门z |坚持门x|换门
—–|——|—–|——|—-
汽车 | 山羊  | 山羊 |中奖  |失败
山羊 | 汽车  | 山羊 |失败  |中奖
山羊 | 山羊  | 汽车 |失败  |中奖</p>

<p>by <a href="http://marilynvossavant.com/game-show-problem/">vos Savant, Marilyn</a></p>

<h2 id="section-1">解法2 条件概率</h2>
<p>假设参数者还是选择的x，事件
A = 猜中获奖
B = 主持人在之后打开了门y</p>

<table>
  <thead>
    <tr>
      <th>.</th>
      <th>p(A)</th>
      <th>p(B|A)</th>
      <th>p(A)*p(B|A)</th>
      <th>p(A|B)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>车在门x</td>
      <td>1/3</td>
      <td>1/2</td>
      <td>1/6</td>
      <td>1/3</td>
    </tr>
    <tr>
      <td>车在门y</td>
      <td>1/3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>车在门z</td>
      <td>1/3</td>
      <td>1</td>
      <td>1/3</td>
      <td>2/3</td>
    </tr>
  </tbody>
</table>

<p>p(A)为参赛者刚开始选择时中奖的先验概率，为1/3。
如果车在y后，主持人不可能开门y, p(B|A) = 0;
如果车在x后，主持人会在门y,门z中任选一门，那么打开门y的概率为1/2；
如果车在门z后，主持人只能在y,z中开门y, 那么p(B|A) = 1。
接下来用贝叶斯公式就能得到结果：
P(A|B) = P(AB)/P(B) = P(A) * P(B|A) / (第三列之和 = 1/2)</p>

<h2 id="section-2">解法3 模拟</h2>
<p><img src="http://iccm.cc/img/monty_hall_simu.png" alt="monty hall simu" /></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">require</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>
<span class="n">num_simu</span> <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">5000</span>
<span class="n">set.seed</span><span class="p">(</span><span class="m">12</span><span class="p">);</span> <span class="n">car_pos</span> <span class="o">&lt;-</span> <span class="n">sample</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="s1">'x'</span><span class="p">,</span> <span class="s1">'y'</span><span class="p">,</span> <span class="s1">'z'</span><span class="p">),</span> <span class="n">length</span><span class="p">(</span><span class="n">num_simu</span><span class="p">),</span> <span class="n">replace</span> <span class="o">=</span> <span class="n">T</span><span class="p">)</span>
<span class="n">set.seed</span><span class="p">(</span><span class="m">95</span><span class="p">);</span> <span class="n">player_guess</span> <span class="o">&lt;-</span> <span class="n">sample</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="s1">'x'</span><span class="p">,</span> <span class="s1">'y'</span><span class="p">,</span> <span class="s1">'z'</span><span class="p">),</span> <span class="n">length</span><span class="p">(</span><span class="n">num_simu</span><span class="p">),</span> <span class="n">replace</span> <span class="o">=</span> <span class="n">T</span><span class="p">)</span>
<span class="n">result_stay</span> <span class="o">&lt;-</span> <span class="n">car_pos</span> <span class="o">==</span> <span class="n">player_guess</span>
<span class="n">monty_choose</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="n">player</span><span class="p">){</span>
  <span class="n">sample</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="s1">'x'</span><span class="p">,</span> <span class="s1">'y'</span><span class="p">,</span> <span class="s1">'z'</span><span class="p">)[</span><span class="o">!</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="s1">'x'</span><span class="p">,</span> <span class="s1">'y'</span><span class="p">,</span> <span class="s1">'z'</span><span class="p">)</span> <span class="o">%</span><span class="k">in</span><span class="o">%</span> <span class="n">c</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="n">player</span><span class="p">))],</span> <span class="m">1</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">monty_door</span> <span class="o">&lt;-</span> <span class="n">mapply</span><span class="p">(</span><span class="n">monty_choose</span><span class="p">,</span> <span class="n">car_pos</span><span class="p">,</span> <span class="n">player_guess</span><span class="p">)</span>
<span class="n">result_change</span> <span class="o">&lt;-</span> <span class="n">car_pos</span> <span class="o">!=</span> <span class="n">player_guess</span> <span class="o">&amp;</span> <span class="n">car_pos</span> <span class="o">!=</span> <span class="n">monty_door</span>
<span class="n">result_stay_cum</span> <span class="o">&lt;-</span> <span class="n">cumsum</span><span class="p">(</span><span class="n">result_stay</span><span class="p">)</span><span class="o">/</span><span class="n">num_simu</span>
<span class="n">result_change_cum</span> <span class="o">&lt;-</span> <span class="n">cumsum</span><span class="p">(</span><span class="n">result_change</span><span class="p">)</span><span class="o">/</span><span class="n">num_simu</span>
<span class="n">monty_data</span> <span class="o">&lt;-</span> <span class="n">data.frame</span><span class="p">(</span><span class="n">car_pos</span><span class="p">,</span> <span class="n">player_guess</span><span class="p">,</span> <span class="n">result_stay</span><span class="p">,</span> <span class="n">monty_door</span><span class="p">,</span> <span class="n">result_change</span><span class="p">,</span> <span class="n">result_stay_cum</span><span class="p">,</span> <span class="n">result_change_cum</span><span class="p">)</span>
<span class="n">ggplot</span><span class="p">(</span><span class="n">monty_data</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">num_simu</span><span class="p">))</span> <span class="o">+</span>
  <span class="n">geom_line</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">result_stay_cum</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s2">"result_stay_cum"</span><span class="p">))</span> <span class="o">+</span> 
  <span class="n">geom_line</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">result_change_cum</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="s2">"result_change_cum"</span><span class="p">))</span> <span class="o">+</span>
  <span class="n">ylab</span><span class="p">(</span><span class="s2">"Probability of Winning"</span><span class="p">)</span>
</code></pre>
</div>

</article>
<div class="comment">
    
        
        <div class="comment-cnt">
            <div class="ds-thread"></div>
        </div>
        
    
</div>
<p class="lotus-anno">声明: 本文采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="nofollow" target="_blank" title="自由转载-非商用-非衍生-保持署名">BY-NC-SA</a> 授权。转载请注明转自: <a href="" title="" rel="nofollow">CCM</a></p>
<section class="lotus-nextpage fn-clear">
    
    <div class="lotus-nextpage-left"><a class="prev" href="/git-workflow" rel="prev">&laquo;&nbsp;Git Workflow</a></div>
    
    
    <div class="lotus-nextpage-right"><a class="next" href="/data-table-package-qa" rel="next">data.table包问题整理&nbsp;&raquo;</a></div>
    
</section>


<footer class="lotus-footer">
	<p>Copyright © 2011–2016 i CCM All rights reserved. </a>.</p>
</footer>
<script src="http://iccm.cc/static/js/jquery.scrollTo.js" type="text/javascript"></script>
<script src="http://iccm.cc/static/js/iLotus.js" type="text/javascript"></script>
    
</body>
</html>
